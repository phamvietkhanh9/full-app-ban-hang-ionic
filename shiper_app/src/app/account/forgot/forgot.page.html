<ion-header>
  <ion-toolbar color="primary">
  <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>{{ text.forgot_title }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
<!--Send email for otp-->
<ion-card mode="ios" *ngIf="!user_id">

<ion-card-header>

<ion-card-title>{{ text.forgot_title }}</ion-card-title>
<ion-card-subtitle>{{ text.forgot_heading }}</ion-card-subtitle>

</ion-card-header>

<ion-card-content>
<form #form="ngForm" (ngSubmit)="forgot(form.value)">

<ion-item>
  <ion-label position="floating">{{ text.forgot_text }}</ion-label>
  <ion-input type="email" ngModel required name="email"></ion-input>
</ion-item>

<br>

<ion-button expand="block" mode="ios" type="submit">Gởi đi</ion-button>
<br>
</form>
</ion-card-content>
</ion-card>

<!--Verify OTP code-->
<ion-card mode="ios" *ngIf="user_id && !newPassword">

<ion-card-header>
<ion-card-title>Xác nhận email của bạn</ion-card-title>
<ion-card-subtitle>Mã OTP đã được gửi trên email của bạn {{ this.email }}</ion-card-subtitle>

</ion-card-header>
<br><br>
<form #form="ngForm" (ngSubmit)="verify(form.value)">

<ion-item>
  <ion-label position="floating" style="font-size: 12px">Nhập mã OTP</ion-label>
  <ion-input type="email" ngModel required name="otp"></ion-input>
</ion-item>

<br>

<ion-button expand="block" mode="ios" type="submit">Xác nhận</ion-button>

</form>
<p align="center">Không nhận được OTP? <a (click)="resend()">Gởi lại</a></p>

</ion-card>

<!--Set New Password-->
<ion-card mode="ios" *ngIf="user_id && newPassword">

<ion-card-header>
<ion-card-title>Tạo mật khẩu mới</ion-card-title>

</ion-card-header>
<br><br>
<form #form="ngForm" (ngSubmit)="new_password(form.value)">

<ion-item>
  <ion-label position="floating" style="font-size: 12px">Mật khẩu mới</ion-label>
  <ion-input type="password" ngModel required name="password"></ion-input>
</ion-item>

<ion-item>
  <ion-label position="floating" style="font-size: 12px">Nhập lại mật khẩu</ion-label>
  <ion-input type="password" ngModel required name="new_password"></ion-input>
</ion-item>

<br>

<ion-button expand="block" mode="ios" type="submit">Cập nhật</ion-button>

</form>
<p align="center">Không nhận được OTP? <a (click)="resend()">Gởi lại</a></p>

</ion-card>

</ion-content>
